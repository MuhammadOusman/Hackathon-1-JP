import{j as e}from"./mui-BJon3m8q.js";import{a as y}from"./chart-BOdAsdoy.js";import{u as v,e as l}from"./redux-hkUHSYAv.js";import{b as w,c as S,e as L,L as R}from"./index-Bz2acmnO.js";import{P as N,O as C,R as A}from"./ReviewSubmission-BS5TuGNM.js";import{u as B}from"./react-8-RJajJm.js";import"./firebase-DhH1w7N4.js";import"./styles-B615tSB9.js";const E=()=>{const a=v(),u=B(),{authUsers:O,isLoading:g}=l(t=>t.userReducer),{orders:p}=l(t=>t.orderReducer),{branches:c}=l(t=>t.reviewsReducer),{products:f}=l(t=>t.productReducer),s=JSON.parse(localStorage.getItem("user"));y.useEffect(()=>{a(w()),a(S()),a(L())},[a]);const d=s?.email?p.filter(t=>String(t.email||"").toLowerCase()===String(s.email).toLowerCase()):[];let m=[];if(s?.branchId&&c&&c.length>0){const t=c.find(r=>String(r.id)===String(s.branchId)),o=t&&t.reviews?t.reviews:[];m=s?.email?o.filter(r=>String(r.email||"").toLowerCase()===String(s.email).toLowerCase()):s?.name?o.filter(r=>String(r.user||"").toLowerCase()===String(s.name).toLowerCase()):[]}const j=()=>{localStorage.clear(),u("/login")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:g?e.jsx("div",{className:"h-screen w-full flex justify-center items-center",children:e.jsx(R,{})}):s&&s.role==="admin"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Admin Dashboard"}),e.jsx("div",{style:{marginTop:24},children:e.jsx("p",{className:"text-white",children:"Admin features go here."})})]}):s&&s.role==="manager"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Manager Dashboard"}),e.jsx("div",{style:{marginTop:24},children:e.jsx("p",{className:"text-white",children:"Manager features go here."})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:j,style:{padding:"8px 16px",background:"#2563eb",color:"#fff",border:"none",borderRadius:"6px",fontWeight:"bold",cursor:"pointer",marginBottom:"2rem"},children:"Logout"}),e.jsx("div",{style:{marginTop:24},children:e.jsx(N,{})}),e.jsx("div",{style:{marginTop:24},children:e.jsx(C,{})}),e.jsx("div",{style:{marginTop:24},children:e.jsx(A,{})}),e.jsx("h3",{children:"Your Orders"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[...d].reverse().map((t,o)=>{const r=n=>{const i=f.find(b=>b.name===n);return i?i.price:0},h=t.items&&Array.isArray(t.items)?t.items.reduce((n,i)=>n+r(i.product)*i.quantity,0):r(t.product)*(t.quantity||1);let x=h;return t.discount&&(x=Math.round(h*(1-t.discount/100))),e.jsxs("div",{style:{background:"#18181b",borderRadius:8,padding:16,color:"#fff",boxShadow:"0 2px 8px #0002"},children:[e.jsxs("div",{style:{fontWeight:"bold",marginBottom:8},children:["Order No. ",d.length-o]}),e.jsxs("div",{style:{marginBottom:4},children:["Name: ",t.name||""]}),e.jsxs("div",{style:{marginBottom:4},children:["Contact: ",t.contact||""]}),e.jsx("div",{style:{marginBottom:8},children:"Items:"}),e.jsx("ul",{style:{marginBottom:8},children:t.items&&Array.isArray(t.items)?t.items.map((n,i)=>e.jsxs("li",{style:{marginLeft:16},children:[n.product," : ",n.quantity]},i)):e.jsxs("li",{style:{marginLeft:16},children:[t.product," : ",t.quantity]})}),e.jsxs("div",{style:{fontWeight:"bold"},children:["Total: Rs. ",x]}),t.discount?e.jsxs("div",{style:{color:"#a3e635",fontWeight:"bold"},children:["Discount Applied: ",t.discount,"%"]}):null]},t.id)})}),e.jsx("h3",{children:"Your Reviews"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginTop:"1rem"},children:m.map(t=>e.jsx("div",{style:{background:"#18181b",borderRadius:8,padding:16,color:"#fff",boxShadow:"0 2px 8px #0002"},children:t.review},t.id))})]})})})};export{E as default};
