import{j as e,g as C,C as I,b as S,E as w}from"./mui-BJon3m8q.js";import{a as m}from"./chart-BOdAsdoy.js";import{u as D,e as h}from"./redux-hkUHSYAv.js";import{f as x,E as k,F as z,G as q}from"./index-Bz2acmnO.js";import{c as g,i as c,b,d as A,a as j}from"./styles-B615tSB9.js";import"./firebase-DhH1w7N4.js";import"./react-8-RJajJm.js";const $=()=>{const[t,r]=m.useState({name:"",contact:"",email:""}),[y,u]=m.useState(null),[s,o]=m.useState({name:"",contact:"",email:""}),n=D(),{branches:p,loading:l}=h(a=>a.branchReducer),N=h(a=>a.userReducer?.currentManager?.managerId),i=p.find(a=>String(a.managerId)===String(N)),f=i?i.employees||[]:[];m.useEffect(()=>{n(x())},[n]);const v=a=>{a.preventDefault(),n(z({branchId:i.id,employee:{...t,id:Date.now()}})),r({name:"",contact:"",email:""})},E=a=>{n(q({branchId:i.id,employeeId:a}))};return l&&p.length===0?e.jsx("div",{className:"text-gray-400",children:"Loading branch..."}):i?e.jsxs("section",{className:"max-w-7xl mx-auto px-2 md:px-4",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"Employee Management"}),e.jsx("form",{onSubmit:v,className:`${g} mb-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-center",children:[e.jsx("input",{type:"text",placeholder:"Name",value:t.name,onChange:a=>r({...t,name:a.target.value}),required:!0,className:c}),e.jsx("input",{type:"text",placeholder:"Contact",value:t.contact,onChange:a=>r({...t,contact:a.target.value}),required:!0,className:c}),e.jsx("input",{type:"email",placeholder:"Email",value:t.email,onChange:a=>r({...t,email:a.target.value}),required:!0,className:c}),e.jsx("button",{type:"submit",disabled:l,className:b,children:l?"Adding...":"Add Employee"})]})}),e.jsx("ul",{className:"space-y-3",children:f.map(a=>e.jsx("li",{className:g,children:y===a.id?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-center",children:[e.jsx("input",{type:"text",value:s.name,onChange:d=>o({...s,name:d.target.value}),placeholder:"Name",className:c}),e.jsx("input",{type:"text",value:s.contact,onChange:d=>o({...s,contact:d.target.value}),placeholder:"Contact",className:c}),e.jsx("input",{type:"email",value:s.email,onChange:d=>o({...s,email:d.target.value}),placeholder:"Email",className:c}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:async()=>{await n(k({branchId:i.id,employeeId:a.id,employee:{...s,id:a.id}})),await n(x()),u(null)},disabled:l,className:b,title:"Save",children:e.jsx(C,{fontSize:"small"})}),e.jsx("button",{onClick:()=>u(null),disabled:l,className:A,title:"Cancel",children:e.jsx(I,{fontSize:"small"})})]})]}):e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-gray-100 font-medium",children:[a.name,e.jsx("span",{className:"ml-2 {chipCls}"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:j,children:a.email}),e.jsx("span",{className:j,children:a.contact}),e.jsx("button",{onClick:()=>E(a.id),disabled:l,className:"p-2 rounded-md bg-red-600 hover:bg-red-700 text-white disabled:opacity-60",title:"Delete",children:e.jsx(S,{fontSize:"small"})}),e.jsx("button",{onClick:()=>{u(a.id),o({name:a.name,contact:a.contact,email:a.email})},disabled:l,className:"p-2 rounded-md bg-green-600 hover:bg-green-700 text-white disabled:opacity-60",title:"Edit",children:e.jsx(w,{fontSize:"small"})})]})]})},a.id))})]}):e.jsx("div",{className:"text-gray-400",children:"No branch found for this manager."})};export{$ as default};
